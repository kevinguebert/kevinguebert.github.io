{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020/02/21/updating-multireference-fields-zapier-webflow","result":{"data":{"markdownRemark":{"html":"<p>This past week while integrating Zapier and Webflow, I became surprised to learn that updating reference and multi-reference fields did not work right out of the box. After spending more time than I wanted on it, I was able to make it work for both single reference and multi-reference. This post is only about multi-reference as single-reference is actually \"easier.\"</p>\n<h3>Overview</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/704deb67276041f31ae347383dd35455/d9199/screen-shot-2020-02-21-at-9.22.09-am.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAPoAAAD6AG1e1JrAAABgUlEQVQoz4VSW27cMAz0/S+TK/QA/cgB2qC1bO92LcuySOrpZDuSt4tkkaDEmKIBURrNsDPM3y4vmqxdrSMEA8zCInZzjjiXUvb9jpSzeB9j2og7FN/nl1/rabloNaihxTRN5/NZKTVOI3qv1+tbCyz4XYxJKddmfHvIIlHCDT4k8cjRuEASiQV73oPEH0WniX5uOnhhbE8JACcgxOjE46yQ0iNikhBqsxGZSWe2/TCM4wjC+75f/xcgX5sdSQmJGxNjrbFYBcTY+2UDYSjnAWr5Xhxv6QxRTxYC+hAgLJByiSlXVStn5CD+EcdlHbR5Gp5/LGpSqu/BHRr3J8Q0qf73aRpfXz95BTyrzSDgcQxXe+22HYDBmyOzoqAmXnoALq/NK9Hc1G8iQ+rMvuqMN8+WLXv30af36GZmcM60/pkvxixaa9zUqL19jX+0HUvxDJ+1Xi7zjMdiROskFshWch3O0tItjhrjcEwYwY/tZk9guM9iiR0zaBtX6dmPbO+/fwG+FOjMBgF00wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screen shot 2020 02 21 at 9 22 09 am\"\n        title=\"screen shot 2020 02 21 at 9 22 09 am\"\n        src=\"/static/704deb67276041f31ae347383dd35455/5a190/screen-shot-2020-02-21-at-9.22.09-am.png\"\n        srcset=\"/static/704deb67276041f31ae347383dd35455/772e8/screen-shot-2020-02-21-at-9.22.09-am.png 200w,\n/static/704deb67276041f31ae347383dd35455/e17e5/screen-shot-2020-02-21-at-9.22.09-am.png 400w,\n/static/704deb67276041f31ae347383dd35455/5a190/screen-shot-2020-02-21-at-9.22.09-am.png 800w,\n/static/704deb67276041f31ae347383dd35455/d9199/screen-shot-2020-02-21-at-9.22.09-am.png 960w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>To do this in totality will take 4 steps. I use Google Sheets as my intermediary of choice but you can use Airtable or any other spreadsheet software.</p>\n<h4>Step 1</h4>\n<p>In my \"Lookup Spreadsheet Row in Google Sheets\", I am looking up the corresponding row to see if there are already referenced items. For a User that has multiple Posts, I would be looking up the User and return the column for Posts reference.</p>\n<p>That column will either be empty or be a string of referenced IDs like \"1234\", \"ABCD\", \"34543\"</p>\n<h4>Step 2</h4>\n<p>Here I run some Javascript to clean up what I am looking for. I have the new Post ID coming in and a list of current IDs already attached to the user.</p>\n<pre><code>let result = []\nif (inputData.articles != null &#x26;&#x26; inputData.articles.length > 0) {\n  result = inputData.articles.split(\",\");\n}\nresult.push('\"' + inputData.newArticle + '\"');\nresult = result.join(\", \");\n\noutput = [{articles: result}];\n</code></pre>\n<p>The code goes through the Post column. If there is currently data there (already has posts), it splits the string into an array from \"1234\", \"ABCD\", \"34543\" into  [\"1234\", \"ABCD\", \"34543\"].</p>\n<p>Then, with the new Post ID, I push that onto the end of the array so it then becomes [\"1234\", \"ABCD\", \"34543\", \"NEW<em>POST</em>ID\"].</p>\n<p>Lastly, because I can't have an array and actually need a string, I concatenate it all together into \"1234\", \"ABCD\", \"34543\", \"NEW<em>POST</em>ID\".</p>\n<h4>Step 3</h4>\n<p>Now I go back and update the same Google Spreadsheet with the updated posts reference. This is for next time and Post is added, it will be the correct references.</p>\n<h4>Step 4</h4>\n<p>Lastly, a PUT request to the Webflow API. I follow the documentation <a href=\"https://developers.webflow.com/#update-live-collection-item\">https://developers.webflow.com/#update-live-collection-item</a> to understand a little bit more how the request should be built and ended up with something fairly simple in Zapier.</p>\n<p>Key Points from the Screenshot below:</p>\n<ol>\n<li>Make sure to update the {CollectionID} with your collection.</li>\n<li>The {Webflow_ID} is the ID of the Webflow item you are trying to update. In this scenario, it would be the User</li>\n<li>The fields \"name\", \"slug\", \"<em>archived\", and \"</em>draft\" are all required in the request.</li>\n<li>For the \"articles\" field (this is the Posts), we want to pass in the Javascript output from the previous step into an array. So that is literally <code>[{Result from previous step}]</code> with the \"[ ]\" around the output. This is the format that Webflow accepts in their API</li>\n<li>Don't forget the Headers at the bottom along with your authorization token which you can find at <a href=\"https://webflow.com/dashboard/sites/%7Bwebsite%7D/integrations\">https://webflow.com/dashboard/sites/{website}/integrations</a></li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 724px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d2bce2c7cfac5d8c7f5cc1cef5878d79/a242d/screen-shot-2020-02-21-at-9.32.32-am.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 129.99999999999997%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAIAAAA44esqAAAACXBIWXMAAAPoAAAD6AG1e1JrAAACP0lEQVQ4y32U2XrjIAyF8/5vOP3mqlcznXoBs9iA7fklsN2kaU4wWxA6WtBtLeWz70P3dw9m3fdtW2mKUvi01eXZ55LXbU1pubFIjGVdclkA8yXlnNefURRI3RiCm7LpljmmlJMii1YhwVGl8thgKML87b2bxs4xuGCds9Nk+CY3MZeJB/A9JRGLMcJOhJ13vTGjscgYRHwIwWOYsqt9+U7+oD1HHwPXL2Jv2nbFpq12W2sb2HexpdKWy1PGUzMQ2bTIqL7jx3TWjfnYnpcY5+oZER6t6YcB69Ave4pUSdd526krMeTS7IRwUkaN8PYSNU6iucZNnIXbhsE5Vy9+LawJobSRh/nvP++/3t76vr8oVB7PALtGm0U/Dh//Ptw0zQrCWHuChpFP5ZswmgOnYxz6vus6q4C/GQUc2u9xJ4wB6tCijizNvYdvNXgayCNUlUtLT1FiJCNJL1JSmicC3nhXlyzoR8lA8s9ziTocb5fVTJatMM8o3l9D86y+lkabYVW6yxcI2/s5vOUkoc2laWawkx2NkdzWc+1V5vwwF9ccnofE5TDMwENX9lfIu72L8/meQpQQinANqURVWiBosqM92c7FX1/icUVp6YkbO8pYiFI6tGpxd7Xw+2OuJlyhQsVoLZrP+oTzCVvQnQe1HCN2rRgwoIRSQ18OkBSo2/mdFVQb1DhGzl7CmGesxW2nZh88tlC+yj0kkSlRIVzpKa9MOZ2pW6Q4Py9dNS+uOOcjPWr6Jo3pT4951xqmtPN/Dv31POWIrxoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"screen shot 2020 02 21 at 9 32 32 am\"\n        title=\"screen shot 2020 02 21 at 9 32 32 am\"\n        src=\"/static/d2bce2c7cfac5d8c7f5cc1cef5878d79/a242d/screen-shot-2020-02-21-at-9.32.32-am.png\"\n        srcset=\"/static/d2bce2c7cfac5d8c7f5cc1cef5878d79/772e8/screen-shot-2020-02-21-at-9.32.32-am.png 200w,\n/static/d2bce2c7cfac5d8c7f5cc1cef5878d79/e17e5/screen-shot-2020-02-21-at-9.32.32-am.png 400w,\n/static/d2bce2c7cfac5d8c7f5cc1cef5878d79/a242d/screen-shot-2020-02-21-at-9.32.32-am.png 724w\"\n        sizes=\"(max-width: 724px) 100vw, 724px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","frontmatter":{"title":"Updating Multi-reference Fields with Zapier & Webflow","date":"February 21, 2020","path":"/2020/02/21/updating-multireference-fields-zapier-webflow","tags":["NoCode","Apps"],"excerpt":"The native integration for updating reference fields from Zapier to Webflow doesn't work. Here's a quick work around to do it in Zapier"}}},"pageContext":{}}}